import nose

from paste.script.appinstall import SetupCommand

from restish import http
from restish.tests.util import wsgi_out
from restish.contrib.noseutils import conf

from ${package}.wsgiapp import make_app

class TestHello:
    def setUp(self):
        SetupCommand('setup-app').run([conf["__file__"]])
        self.A = make_app(conf.global_conf, **conf.local_conf)

    def tearDown(self):
        pass

    def testIndex(self):
        R = wsgi_out(self.A, http.Request.blank("/").environ)
        assert R['status'].startswith('200')
        assert R['body'].find('<h1>${project}</h1>')

if __name__ == "__main__":
    nose.run()
